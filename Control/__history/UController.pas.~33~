unit UController;

interface

uses
  UTypeDataFieldORM, UAlunoORM, System.SysUtils, System.Classes, System.UITypes,
  FireDAC.Stan.Error, Data.DB,
  FireDAC.Stan.Intf,
  FireDAC.Stan.Option, FireDAC.UI.Intf,
  FireDAC.Phys.Intf, FireDAC.Stan.Def, FireDAC.Stan.Pool, FireDAC.Stan.Async,
  FireDAC.Phys, FireDAC.VCLUI.Wait, FireDAC.Stan.Param, FireDAC.DatS,
  FireDAC.DApt.Intf, FireDAC.DApt, FireDAC.Comp.DataSet, FireDAC.Comp.Client,
  FireDAC.Phys.MSSQL, FireDAC.Phys.MSSQLDef;

Type
  TController = Class(TObject)
  private
    FId_Aluno: TIntegerFieldORM;
    FNome_Aluno: TStringFieldORM;
    FCurso: TStringFieldORM;
    FTurno: TStringFieldORM;
    FPeriodo: TIntegerFieldORM;
    FData_Ingresso: TDateTimeFieldORM;
    FSituacao: TStringFieldORM;
    FCadeirante: TBooleanFieldORM;
    FObservacao: TStringFieldORM;
    FData_Hora_Inclusao: TDateTimeFieldORM;
    FUsuario_Inclusao: TStringFieldORM;
    FData_Hora_Alteracao: TDateTimeFieldORM;
    FUsuario_alteracao: TStringFieldORM;

    function getID_Aluno: TIntegerFieldORM;
    procedure setID_Aluno(const Value: TIntegerFieldORM);
    function getNome_Aluno: TStringFieldORM;
    procedure setNome_Aluno(const Value: TStringFieldORM);
    function getCurso: TStringFieldORM;
    procedure setCurso(const Value: TStringFieldORM);
    function getTurno: TStringFieldORM;
    procedure setTurno(const Value: TStringFieldORM);
    function getPeriodo: TIntegerFieldORM;
    procedure setPeriodo(const Value: TIntegerFieldORM);
    function getData_Ingresso: TDateTimeFieldORM;
    procedure setData_Ingresso(const Value: TDateTimeFieldORM);
    function getSituacao: TStringFieldORM;
    procedure setSituacao(const Value: TStringFieldORM);
    function getCadeirante: TBooleanFieldORM;
    procedure setCadeirante(const Value: TBooleanFieldORM);
    function getObservacao: TStringFieldORM;
    procedure setObservacao(const Value: TStringFieldORM);
    function getData_Hora_Inclusao: TDateTimeFieldORM;
    procedure setData_Hora_Inclusao(const Value: TDateTimeFieldORM);
    function getUsuario_Inclusao: TStringFieldORM;
    procedure setUsuario_Inclusao(const Value: TStringFieldORM);
    function getData_Hora_Alteracao: TDateTimeFieldORM;
    procedure setData_Hora_Alteracao(const Value: TDateTimeFieldORM);
    function getUsuario_Alteracao: TStringFieldORM;
    procedure setUsuario_alteracao(const Value: TStringFieldORM);

  public

    Query: TFDQuery;
    conn: TFDconnection;
    FORMMSG: String;
    function Insert: String;

    property ID_Aluno: TIntegerFieldORM read getID_Aluno write setID_Aluno;
    property Nome_Aluno: TStringFieldORM read getNome_Aluno write setNome_Aluno;
    property Curso: TStringFieldORM read getCurso write setCurso;
    property Turno: TStringFieldORM read getTurno write setTurno;
    property Periodo: TIntegerFieldORM read getPeriodo write setPeriodo;
    property Data_Ingresso: TDateTimeFieldORM read getData_Ingresso
      write setData_Ingresso;
    property Situacao: TStringFieldORM read getSituacao write setSituacao;
    property Cadeirante: TBooleanFieldORM read getCadeirante
      write setCadeirante;
    property Observacao: TStringFieldORM read getObservacao write setObservacao;
    property Data_Hora_Inclusao: TDateTimeFieldORM read getData_Hora_Inclusao
      write setData_Hora_Inclusao;
    property Usuario_Inclusao: TStringFieldORM read getUsuario_Inclusao
      write setUsuario_Inclusao;
    property Data_Hora_Alteracao: TDateTimeFieldORM read getData_Hora_Alteracao
      write setData_Hora_Alteracao;
    property Usuario_Alteracao: TStringFieldORM read getUsuario_Alteracao
      write setUsuario_alteracao;

    function FieldNotNull: TBooleanFieldORM;
  End;

implementation

{ TController }

function TController.FieldNotNull: Boolean;
begin
  Result := TBooleanFieldORM.Create;
  FORMMSG := '';
  if ID_Aluno.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'ID Aluno não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Nome_Aluno.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Nome Aluno não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Curso.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Curso não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Turno.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Turno não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Periodo.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Periodo não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Data_Ingresso.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Data ingresso não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Situacao.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Situacao não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Data_Hora_Inclusao.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Data hora inclusao não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Usuario_Inclusao.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Usuario inclusao não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Data_Hora_Alteracao.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Data hora alteracao não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if Usuario_Alteracao.Assigned then
  begin
    Result.FAssigned := True;
  end
  else
  begin
    FORMMSG := FORMMSG +
      'Usuario alteracao não foi preenchido, campo obrigatório. ' + #13#10;
  end;
  if FORMMSG <> '' then
  begin
    Result.FAssigned := False;
  end
  else
  begin
    Result.FAssigned := True;
    FORMMSG := 'Operação realizada com sucesso !';
  end;
end;

function TController.getCadeirante: TBooleanFieldORM;
begin
  Result := FCadeirante;
end;

function TController.getCurso: TStringFieldORM;
begin
  Result := FCurso;
end;

function TController.getData_Hora_Alteracao: TDateTimeFieldORM;
begin
  Result := FData_Hora_Alteracao;
end;

function TController.getData_Hora_Inclusao: TDateTimeFieldORM;
begin
  Result := FData_Hora_Inclusao;
end;

function TController.getData_Ingresso: TDateTimeFieldORM;
begin
  Result := FData_Ingresso;
end;

function TController.getID_Aluno: TIntegerFieldORM;
begin
  Result := FId_Aluno;
end;

function TController.getNome_Aluno: TStringFieldORM;
begin
  Result := FNome_Aluno;
end;

function TController.getObservacao: TStringFieldORM;
begin
  Result := FObservacao;
end;

function TController.getPeriodo: TIntegerFieldORM;
begin
  Result := FPeriodo;
end;

function TController.getSituacao: TStringFieldORM;
begin
  Result := FSituacao;
end;

function TController.getTurno: TStringFieldORM;
begin
  Result := FTurno;
end;

function TController.getUsuario_Alteracao: TStringFieldORM;
begin
  Result := FUsuario_alteracao;
end;

function TController.getUsuario_Inclusao: TStringFieldORM;
begin
  Result := FUsuario_Inclusao;
end;

function TController.Insert: String;
var
  Aluno: TAluno;
begin
  if FieldNotNull.Assigned then
  begin
    Aluno := TAluno.Create;
    Aluno.conn := conn;
    Aluno.QueryORM := Query;
    Aluno.ID_Aluno.Value := ID_Aluno.Value;
    Aluno.Nome_Aluno.Value := Nome_Aluno.Value;
    Aluno.Curso.Value := Curso.Value;
    Aluno.Turno.Value := Turno.Value;
    Aluno.Periodo.Value := Periodo.Value;
    Aluno.Data_Ingresso.Value := Data_Ingresso.Value;
    Aluno.Situacao.Value := Situacao.Value;
    Aluno.Cadeirante.Value := Cadeirante.Value;
    Aluno.Observacao.Value := Observacao.Value;
    Aluno.Data_Hora_Inclusao.Value := Data_Hora_Inclusao.Value;
    Aluno.Usuario_Inclusao.Value := Usuario_Inclusao.Value;
    Aluno.Data_Hora_Alteracao.Value := Data_Hora_Alteracao.Value;
    Aluno.Usuario_Alteracao.Value := Usuario_Alteracao.Value;
    Aluno.Insert;
    Result := Aluno.FORMMSG;
    Aluno.Free;

  end;

end;

procedure TController.setCadeirante(const Value: TBooleanFieldORM);
begin
  FCadeirante := Value;

end;

procedure TController.setCurso(const Value: TStringFieldORM);
begin
  FCurso := Value;
end;

procedure TController.setData_Hora_Alteracao(const Value: TDateTimeFieldORM);
begin
  FData_Hora_Alteracao := Value;
end;

procedure TController.setData_Hora_Inclusao(const Value: TDateTimeFieldORM);
begin
  FData_Hora_Inclusao := Value;
end;

procedure TController.setData_Ingresso(const Value: TDateTimeFieldORM);
begin
  FData_Ingresso := Value;
end;

procedure TController.setID_Aluno(const Value: TIntegerFieldORM);
begin
  FId_Aluno := Value;
end;

procedure TController.setNome_Aluno(const Value: TStringFieldORM);
begin
  FNome_Aluno := Value;
end;

procedure TController.setObservacao(const Value: TStringFieldORM);
begin
  FObservacao := Value;
end;

procedure TController.setPeriodo(const Value: TIntegerFieldORM);
begin
  FPeriodo := Value;
end;

procedure TController.setSituacao(const Value: TStringFieldORM);
begin
  FSituacao := Value;
end;

procedure TController.setTurno(const Value: TStringFieldORM);
begin
  FTurno := Value;
end;

procedure TController.setUsuario_alteracao(const Value: TStringFieldORM);
begin
  FUsuario_alteracao := Value;
end;

procedure TController.setUsuario_Inclusao(const Value: TStringFieldORM);
begin
  FUsuario_Inclusao := Value;
end;

end.
